apply plugin: 'application'
apply plugin: 'docker'

buildscript {
    repositories { jcenter() }
    dependencies { classpath('se.transmode.gradle:gradle-docker:1.+') }
}

repositories { jcenter() }

dependencies {
    compile "io.dropwizard:dropwizard-core:${dropwizard_version}"
    compile "io.dropwizard:dropwizard-jdbi:${dropwizard_version}"
    compile "postgresql:postgresql:9.+"
}

task wrapper(type: Wrapper) { gradleVersion = '2.14.1' }

sourceCompatibility = 1.8
group = 'alex'
version = '1.0'
mainClassName = 'com.alex.listings.HelloWorldApplication'
//applicationDefaultJvmArgs = ["server", "/${applicationName}-${version}/config/example.yml"]
run {
    args 'server', 'src/dist/config/example.yml'
}

docker {
    baseImage "java:8-jre"
    ext.appDir = "${applicationName}-${version}"
//    entryPoint("/${appDir}/bin/${applicationName}", "server", "/${appDir}/dist/example.yml")
}

distDocker {

    //dryRun = true
}
